# ðŸ½ï¸ Restaurant Reservation System Backend
This is a Spring Bootâ€“based backend service for managing restaurant reservations. It provides RESTful APIs for creating, updating, canceling, and retrieving reservations, with support for customer details, notification preferences, and reservation statuses. The system is designed for clarity, maintainability, and real-world reliability, featuring robust DTO validation and OpenAPI documentation.

## ðŸ“„ Assumptions and Design Decisions

This document outlines the core assumptions and architectural decisions made during the development of the Restaurant Reservation System Backend. It serves as a reference for reviewers to understand the rationale behind the system's behavior and structure.

---

### âœ… Assumptions

- **Reservation Timing**
  - Reservations must be made for future dates and times.
  - A customer cannot book multiple reservations for the same time slot.

- **Customer Data**
  - Customers provide valid mobile numbers and email addresses.
  - Mobile numbers follow Philippine formatting rules (e.g., `9XX-XXX-XXXX`) but ommitting the prefix +63 or 0.

- **Notification Modes**
  - Only `SMS` and `EMAIL` are supported as notification channels.
  - Notification preferences are stored per reservation, not globally per customer.

- **Reservation Lifecycle**
  - A reservation starts in `RESERVED` status.
  - Cancellations update the status to `CANCELLED` and refresh the `dateAndTimeUpdated` field.

- **ID and Timestamps**
  - `id` and `dateAndTimeUpdated` are generated by the backend and must be `null` during creation.
  - All timestamps use ISO 8601 format and are assumed to be in local server time.

---

### ðŸ› ï¸ Design Decisions

- **DTO-Centric Architecture**
  - All controller endpoints use DTOs to decouple internal entities from external contracts.
  - DTOs are validated recursively, including nested `CustomerDTO` fields.

- **Enum Usage**
  - `ReservationStatus` and `NotificationMode` are implemented as enums to enforce valid states.
  - Enums are serialized as strings in JSON for clarity and compatibility.

- **Validation Strategy**
  - Bean validation annotations (`@NotNull`, `@Pattern`, etc.) are applied to DTOs.
  - Custom validators are used for mobile number formats and optional ID handling.

- **OpenAPI Integration**
  - Springdoc is used to generate live API documentation at `/swagger-ui/index.html`.
  - DTO schemas are exposed with clear field descriptions and constraints.

- **Testing Approach**
  - Controller tests use `@WebMvcTest` with `@TestConfiguration` to isolate logic and avoid premature context loading.
  - `MockMvc` and `ObjectMapper` are used to simulate realistic HTTP flows.
  - Unit tests assert status codes, response payloads, and edge-case behavior.

- **Error Handling**
  - Validation failures return `400 Bad Request` with detailed field-level messages.
  - Missing resources (e.g., reservation not found) return `404 Not Found`.

---

### ðŸ§ª Testing Strategy

- **Unit Testing**
  - Each controller method is tested with valid payloads.
  - Mocked service responses simulate realistic reservation flows (creation, cancellation, update).

- **Postman Testing**
  - Postman collections mirror unit test payloads for manual verification.
  - Sample requests include creation, cancellation, and retrieval by customer ID.

- **Consistency**
  - Test payloads use the same field names and formats as the OpenAPI schema.
  - Enum values are tested for both valid and invalid cases.

---

### ðŸ“˜ Future Considerations

- Add support for reservation conflict detection (e.g., overlapping time slots).
- Integrate authentication and role-based access control.
- Expand notification modes to include push or in-app alerts.
- Persist audit logs for reservation changes.

---

## âš™ï¸ Installation Guidelines
### âœ… Prerequisites
Ensure the following tools are installed on your machine:

| Tool      | Version Required | Installation Guide |
|-----------|------------------|--------------------|
| **JDK**   | 17               | [Download JDK 17](https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html) |
| **Maven** | 3.x              | [Install Maven](https://maven.apache.org/install.html) |
| **Postman** | Latest         | [Download Postman](https://www.postman.com/downloads/) |

> After installation, verify versions using:
> ```bash
> java -version
> mvn -version
> ```

---

## ðŸš€ How to Run the Program
1. Clone the repository:
   ```bash
   git clone https://github.com/gdpags5/restaurant-reservation-system.git
   cd restaurant-reservation-system
2. Build the project:
   ```bash
   mvn clean install
3. Run the application:
   ```bash
   mvn spring-boot:run
4. The backend will start
   `http://localhost:8080`

---

## ðŸ§ª How to Test Using Postman
1. Open Postman and create a new request.
2. Set the request type to `POST`, `GET`, `PUT` or as needed.
3. Use the following sample endpoints:
   | Action | Method | Endpoint |
   |--------|--------|----------|
   | Create reservation | POST | `/reservations` |
   | Cancel reservation | POST | `/reservations/{id}/cancel` |
   | Update reservation | PUT  | `/reservations/{id}` |
   | Get by customer ID | GET  | `/reservations/customer/{id}` | 
4. Example `POST/reservations` payload:
   ```json
   {
   "customerDTO": {
       "id": 101,
       "name": "Juan dela Cruz",
       "email": "juandelacruz@email.com",
       "mobileNumber": "09171234567"
   },
   "numberOfGuests": 5,
   "reservationDate": "2025-11-08",
   "reservationTime": "18:30",
   "status": "PENDING",
   "methodOfNotification": "SMS"
   }

---

## ðŸ“˜ Accessing OpenAPI Documentation
Once the application is running, you can access the live API documentation via Swagger UI:
`http://localhost:8080/swagger-ui/index.html`
This interface allows you to:
- Explore all available endpoints
- View request/response schemas
- Execute live API calls directly from the browser

---

## ðŸ§© Notes
- Ensure your system clock and timezone are correct for accurate reservation timestamps.
- All date/time fields use ISO 8601 format (`YYYY-MM-DD`, `HH:mm`, `YYYY-MM-DDTHH:mm:ss`).
- Validation errors will return `400 Bad Request` with detailed messages.
